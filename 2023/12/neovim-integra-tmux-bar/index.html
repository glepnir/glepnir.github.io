<!doctype html><html><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><title>Neovim Integra Tmux Bar - glepnir's blog</title><meta name=viewport content="width=device-width,initial-scale=1">
<meta itemprop=name content="Neovim Integra Tmux Bar"><meta itemprop=description content="Integration tmux status bar with neovim"><meta itemprop=datePublished content="2023-12-02T18:50:57+08:00"><meta itemprop=dateModified content="2023-12-02T18:50:57+08:00"><meta itemprop=wordCount content="701"><meta itemprop=keywords content="neovim,tmux,"><meta property="og:title" content="Neovim Integra Tmux Bar"><meta property="og:description" content="Integration tmux status bar with neovim"><meta property="og:type" content="article"><meta property="og:url" content="http://example.org/2023/12/neovim-integra-tmux-bar/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-12-02T18:50:57+08:00"><meta property="article:modified_time" content="2023-12-02T18:50:57+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Neovim Integra Tmux Bar"><meta name=twitter:description content="Integration tmux status bar with neovim"><link rel=stylesheet type=text/css media=screen href=http://example.org/css/normalize.css><link rel=stylesheet type=text/css media=screen href=http://example.org/css/main.css><link id=dark-scheme rel=stylesheet type=text/css href=http://example.org/css/dark.css><script src=http://example.org/js/feather.min.js></script><script src=http://example.org/js/main.js></script></head><body><div class="container-wide wrapper"><div class=header><div class=avatar><a href=http://example.org/><img src="https://avatars.githubusercontent.com/u/41671631?s=96&amp;v=4" alt="glepnir's blog"></a></div><h1 class=site-title><a href=http://example.org/>glepnir's blog</a></h1><div class=site-description><p>vimer and write C C++ rust lua python etc</p><nav class="nav social"><ul class=flat><li><a href=https://github.com/glepnir/ title=Github><i data-feather=github></i></a></li><li><a href=https://space.bilibili.com/321783076 title=bilibili><i data-feather=tv></i></a></li><li><a href=https://www.youtube.com/channel/UCvlERaXQD8L2jzNC_s-I5xw title=youtube><i data-feather=youtube></i></a></li><li><a href=/index.xml title=RSS><i data-feather=rss></i></a></li></ul></nav></div><nav class=nav><ul class=flat><li><a href=/>Home</a></li><li><a href=/posts>All posts</a></li><li><a href=/about>About</a></li><li><a href=/tags>Tags & Stats</a></li></ul></nav></div><div class=article-nav id=article-nav-id><div class=post><div class=post-header><div class=meta><div class=date><span class=day>02</span>
<span class=rest>Dec 2023</span></div></div><div class=matter><h1 class=title>Neovim Integra Tmux Bar</h1></div></div><aside class=toc id=static-toc><header><h3>Contents</h3></header><nav id=TableOfContents><ol><li><a href=#introduction>Introduction</a></li><li><a href=#integration>Integration</a><ol><li><a href=#tmux-settings>Tmux Settings</a></li><li><a href=#neovim-lua-code>Neovim Lua Code</a></li></ol></li></ol></nav></aside><p><img src=../../../asserts/tmux_bar.png alt=image></p><h2 id=introduction>Introduction</h2><p>Usually I use neovim and tmux in kitty terminal. Currently I use archlinux + hyprland + waybar.
There are many status bars on my monitor. <code>neovim statusline and tabline</code>, tmux bar waybar. They
overlap in many places and take up my screen space. So I decided to remove some status bars. They
are distracting me. I think I can focus on writing code. And I&rsquo;m tired of those status bars with
graphical symbols. So I tried to do some integration.</p><h2 id=integration>Integration</h2><p>Normally I don&rsquo;t use neovim <code>tabline</code> (also lots of pepole call bufferline) that mean i don&rsquo;t
set <code>set tabline=2</code> in my neovim config. my workflow is <code>winbar</code> + my personal plugin flybuf to
switch buffer. But sometimes I need to see the full name of a file. So I&rsquo;m going to use tmux&rsquo;s bar
as my bufferline. it have many spaces.</p><h3 id=tmux-settings>Tmux Settings</h3><p>Okay first need put tmux bar to top by set <code>set -g status-position top</code>. If you doesn&rsquo;t see the bar
make sure you set <code>set -g status on</code>. and I need the active pane information also in left. just set
<code>status-justify</code> to left.</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>set -g status-interval 1
</span></span><span style=display:flex><span>set -g status on
</span></span><span style=display:flex><span>set -g status-justify left
</span></span><span style=display:flex><span>set -g status-position top
</span></span></code></pre></td></tr></table></div></div><p>notice <code>status-interval</code> set to <code>1</code> make tmux bar update quickly.</p><p>now need config a tmux bar:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>prefix=&#34;#{?client_prefix,üê†,}&#34;
</span></span><span style=display:flex><span>set -g status-left &#34;#[fg=green]ÓÇ∫#[fg=black,bg=green]ÔÅº #{?@path,#{@path},#{s|$HOME/||:pane_current_path}}#[bg=$background,fg=green]ÓÇº&#34;
</span></span><span style=display:flex><span>set -g status-right &#34;$prefix #[fg=yellow]ÓÇ∫#[bg=yellow,fg=black,bold]%Y %b %d %a#[bg=$background,fg=yellow]ÓÇº&#34;
</span></span><span style=display:flex><span>set -g window-status-format &#34;#[fg=$inactive]ÓÇ∫#[bg=$inactive,fg=colour7]#I:#W#[fg=$inactive,bg=$background]ÓÇº&#34;
</span></span><span style=display:flex><span>set -g window-status-current-format &#34;#[fg=blue]ÓÇ∫#[bg=blue,fg=black,bold]#I:#W#[fg=blue,bg=$background]ÓÇº&#34;
</span></span><span style=display:flex><span>set -g window-status-separator &#39;&#39;
</span></span></code></pre></td></tr></table></div></div><p><strong>Need nerd font install OR Config symbol map in kitty</strong></p><h3 id=neovim-lua-code>Neovim Lua Code</h3><p>now let neovim control tmux bar to show file name.</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#66d9ef>local</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>set_tmux_bar</span>()
</span></span><span style=display:flex><span>  vim.defer_fn(<span style=color:#66d9ef>function</span>()
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>local</span> fname <span style=color:#f92672>=</span> api.nvim_buf_get_name(<span style=color:#ae81ff>0</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> <span style=color:#f92672>#</span>fname <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span> <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>local</span> parts <span style=color:#f92672>=</span> vim.split(fname, <span style=color:#e6db74>&#39;/&#39;</span>, { trimempty <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span> })
</span></span><span style=display:flex><span>    <span style=color:#75715e>-- remove /home/xx/workspace and folder/filename</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>-- because i set winbar to show file name and up folder in winbar</span>
</span></span><span style=display:flex><span>    parts <span style=color:#f92672>=</span> { unpack(parts, (parts[<span style=color:#ae81ff>3</span>] <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;workspace&#39;</span> <span style=color:#f92672>and</span> <span style=color:#ae81ff>4</span> <span style=color:#f92672>or</span> <span style=color:#ae81ff>3</span>), <span style=color:#f92672>#</span>parts <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>) }
</span></span><span style=display:flex><span>    fname <span style=color:#f92672>=</span> table.concat(parts, <span style=color:#e6db74>&#39;/&#39;</span>)
</span></span><span style=display:flex><span>    vim.system({ <span style=color:#e6db74>&#39;tmux&#39;</span>, <span style=color:#e6db74>&#39;set&#39;</span>, <span style=color:#e6db74>&#39;@path&#39;</span>, fname }, { text <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span> }, <span style=color:#66d9ef>function</span>(obj)
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>if</span> obj.stderr <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>        print(obj.stderr)
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>end</span>)
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>end</span>, <span style=color:#ae81ff>0</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>end</span>
</span></span></code></pre></td></tr></table></div></div><p>why wrap in <code>defer_fn</code>. actually <code>defer_fn</code> just a luv (libuv lua wrap) timer wrapper. when timeout
is <code>0</code> it will run in next <code>event loop</code>. because doesn&rsquo;t have a high priority for me. the
callbacks in current event loop make more sense for me. So I run it in next event loop. there just
show file folder in tmux bar the tail and home is removed. because i show filename in neovim winbar.</p><p>the core of these codes just <code>tmux set @path</code>. this is tmux script formats. you can take more
information about this format on tmux wiki page. in tmux I config the left like</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>set -g status-left &#34;#[fg=green]ÓÇ∫#[fg=black,bg=green]ÔÅº #{?@path,#{@path},#{s|$HOME/||:pane_current_path}}#[bg=$background,fg=green]ÓÇº&#34;
</span></span></code></pre></td></tr></table></div></div><p>let me explain this code. when neovim not running <code>@path</code> is empty then tmux bar will show current
pane path <code>{:pane_current_path}</code>. this will show a full path which have host name. Usually i don&rsquo;t
want see it. replace <code>#{s|$HOME/||:pane_current_path}</code> when path have <code>$HOME</code> will sub to empty.</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#66d9ef>local</span> au <span style=color:#f92672>=</span> vim.api.nvim_create_autocmd
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>au(<span style=color:#e6db74>&#39;VimLeave&#39;</span>, {
</span></span><span style=display:flex><span>  group <span style=color:#f92672>=</span> my_group,
</span></span><span style=display:flex><span>  callback <span style=color:#f92672>=</span> <span style=color:#66d9ef>function</span>()
</span></span><span style=display:flex><span>    vim.system({ <span style=color:#e6db74>&#39;tmux&#39;</span>, <span style=color:#e6db74>&#39;set&#39;</span>, <span style=color:#e6db74>&#39;@path&#39;</span>, <span style=color:#e6db74>&#39;0&#39;</span> }, { text <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span> }, <span style=color:#66d9ef>function</span>() <span style=color:#66d9ef>end</span>)
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>end</span>,
</span></span><span style=display:flex><span>})
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>au(<span style=color:#e6db74>&#39;BufEnter&#39;</span>, {
</span></span><span style=display:flex><span>  group <span style=color:#f92672>=</span> my_group,
</span></span><span style=display:flex><span>  callback <span style=color:#f92672>=</span> <span style=color:#66d9ef>function</span>()
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> vim.fn.getenv(<span style=color:#e6db74>&#39;TMUX&#39;</span>) <span style=color:#f92672>==</span> <span style=color:#ae81ff>1</span> <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>    set_tmux_bar()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> <span style=color:#f92672>#</span>api.nvim_get_autocmds({ group <span style=color:#f92672>=</span> my_group, event <span style=color:#f92672>=</span> { <span style=color:#e6db74>&#39;FocusGained&#39;</span> } }) <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span> <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>      au(<span style=color:#e6db74>&#39;FocusGained&#39;</span>, {
</span></span><span style=display:flex><span>        group <span style=color:#f92672>=</span> my_group,
</span></span><span style=display:flex><span>        callback <span style=color:#f92672>=</span> <span style=color:#66d9ef>function</span>()
</span></span><span style=display:flex><span>          set_tmux_bar()
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>end</span>,
</span></span><span style=display:flex><span>      })
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>end</span>,
</span></span><span style=display:flex><span>})
</span></span></code></pre></td></tr></table></div></div><p>nkNeed some events to trigger update. First is <code>BufEnter</code>. when a buffer open update the tmxu bar.
when exit neovim also need update tmux bar to current path so just set <code>@path</code> to <code>0</code>. Next is
<code>FocusGained</code> sometimes I will split a tmux window to run neovim do some test or some other works.
Also need update tmux bar.</p><p>Now everything works perfect.</p></div><nav class="hide-on-mobile section-nav"><nav id=TableOfContents><ol><li><a href=#introduction>Introduction</a></li><li><a href=#integration>Integration</a><ol><li><a href=#tmux-settings>Tmux Settings</a></li><li><a href=#neovim-lua-code>Neovim Lua Code</a></li></ol></li></ol></nav></nav></div><div class=post><hr class=footer-separator><div class=tags><ul class=flat><li class=tag-li><a href=/tags/neovim>neovim</a></li><li class=tag-li><a href=/tags/tmux>tmux</a></li></ul></div><div class=back><a href=https://github.com/glepnir/glepnir.github.io/blob/master/content/posts/2023/12/neovim-integra-tmux-bar.md title=github><i data-feather=github></i> Edit this on GitHub</a></div><div class=back><a href=http://example.org/><span aria-hidden=true>‚Üê Back</span></a></div><div class=back>Next time, we'll talk about <i>"Keep learning"</i></div></div></div><div class="footer wrapper"><nav class=nav><div>2023 ¬© Copyright notice</div></nav></div><script>feather.replace()</script><script>var enableTruncate=!0,filterDepth=!1;const MAX_DEPTH=9;window.addEventListener("DOMContentLoaded",()=>{const e=new IntersectionObserver(e=>{e.reverse().forEach(e=>{const n=e.target.getAttribute("id");if(e.intersectionRatio>0){var t=document.querySelectorAll(`nav li a[href="#${n}"]`);t!=null&&t.forEach(e=>{if(e!=null){var t=getDepth(e.parentElement);filterDepth&&t<=MAX_DEPTH&&(clearActiveStatesInTableOfContents(),e.parentElement.classList.add("active"))}else filterDepth||(clearActiveStatesInTableOfContents(),e.parentElement.classList.add("active"))})}})});document.querySelectorAll("h1[id],h2[id],h3[id],h4[id]").forEach(t=>{e.observe(t)})});function isVisible(e){if(!(e instanceof Element))return!1;const n=getComputedStyle(e);if(n.display==="none")return!1;if(n.visibility!=="visible")return!1;if(n.opacity<.1)return!1;if(e.offsetWidth+e.offsetHeight+e.getBoundingClientRect().height+e.getBoundingClientRect().width===0)return!1;const t={x:e.getBoundingClientRect().left+e.offsetWidth/2,y:e.getBoundingClientRect().top+e.offsetHeight/2};if(t.x<0)return!1;if(t.x>(document.documentElement.clientWidth||window.innerWidth))return!1;if(t.y<0)return!1;if(t.y>(document.documentElement.clientHeight||window.innerHeight))return!1;let s=document.elementFromPoint(t.x,t.y);do if(s===e)return!0;while(s=s.parentNode)return!1}function clearActiveStatesInTableOfContents(){document.querySelectorAll("nav li").forEach(e=>{e.classList.remove("active")})}function getDepth(e){for(var t=0;e!==null&&e.tagName.toLowerCase()!=="ul";)t++,e=e.parentElement;return t}function navItems(){var e=document.querySelectorAll("nav nav li a");return Array.from(e).filter(e=>e.href!=null&&e.hash.startsWith("#"))}function lasItemInNavBarVisible(){var e=navItems().slice(-1)[0];return isVisible(e)}document.addEventListener("DOMContentLoaded",function(){if(!enableTruncate)return;var e=navItems();console.log(e),lasItemInNavBarVisible()||(filterDepth=!0,e.forEach(function(e){var t=getDepth(e.parentElement);t>MAX_DEPTH&&e.parentElement.classList.add("depth-nested")}))})</script></body></html>